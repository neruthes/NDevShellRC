#!/bin/bash

if [[ $(uname) != "Linux" ]]; then
    exit 1
fi

echo "Switching display mode..."
CurrentCase=$(NDevVar get switch-display--currentCase)

if [[ $1 = "set" ]]; then
    CurrentCase=$2;
fi

if [[ $1 = "" ]]; then
    case $CurrentCase in
        "Native_Only")
            CurrentCase="Mirror"
            ;;
        "Mirror")
            CurrentCase="DP1_Only"
            ;;
        *)
            CurrentCase="Native_Only"
            ;;
    esac
fi

echo "Switching to $CurrentCase"

bash "$HOME/.screenlayout/base-$CurrentCase.sh"
NDevVar set switch-display--currentCase $CurrentCase

wpreload
