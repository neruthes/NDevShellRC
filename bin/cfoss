#!/bin/bash

[[ -z $WRITE_OSSLIST ]] && WRITE_OSSLIST=y

OSS_URL_PREFIX="https://oss-r2.neruthes.xyz"

touch $HOME/.config/cfoss.conf
source $HOME/.config/cfoss.conf

#######################################################################################
### What to expect from config:
# S3_ENDPOINT=https://xxxxxxxxxxxxxxxx.r2.cloudflarestorage.com
#######################################################################################


source $(dirname $0)/libossupload-core.lib.sh


S3_ARGS="--endpoint-url $S3_ENDPOINT --bucket oss"

if [[ -e "$1" ]]; then
    aws s3api put-object  --body "$1"  --key "$FIANL_OBJ_KEY"  $S3_ARGS
else
    echo "[ERROR] Cannot find the input file."
fi

