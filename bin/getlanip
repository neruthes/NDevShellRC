#!/bin/bash

ip --json addr show "$(ip -json route get to 1.2.3.4 | jq -r  '.[0].dev')" | jq -r '[.[0].addr_info | .[] | select(.family == "inet")][0].local'
