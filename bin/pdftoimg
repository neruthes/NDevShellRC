#!/bin/bash

inFilePath="$1"
outFileDir="$2"
TYPE="$3"
if [[ -z "$outFileDir" ]]; then
    # outFileDir="/tmp/pdftoimg"
    outFileDir="$(dirname "$inFilePath")"
fi
if [[ -z "$TYPE" ]]; then
    TYPE=jpg
fi
if [[ -z $DPI ]]; then
    DPI=300
fi
mkdir -p "$outFileDir"

outFileBasename="$(basename "$inFilePath").$TYPE"

#pdftoppm "$inFilePath" -png -aa yes -r 600 > "$outFileDir/$outFileBasename"
convert -units PixelsPerInch -density $DPI -quality 91 $inFilePath "$outFileDir/$outFileBasename"
