#!/bin/bash

IFNAME="$1"
OUTPUT_FORMAT="$2"

if [[ -z "$2" ]]; then
    echo "Usage:        $(basename $0)   input.pdf   jpg"
    exit 0
fi

GSDEV="jpeg"
case "${OUTPUT_FORMAT,,}" in
    png)
        GSDEV="png16m"
        ;;
esac
echo "GSDEV = $GSDEV"


gs \
    -dNOPAUSE \
    -dBATCH \
    -sDEVICE="$GSDEV" \
    -r600 \
    -dGraphicsAlphaBits=4 \
    -dTextAlphaBits=4 \
    -sOutputFile="$IFNAME.%d.$OUTPUT_FORMAT" \
    "$IFNAME"
