#!/bin/bash

echo ""
echo ""
echo "[ERROR] This script 'pdftoimg' has been deprecated. Please migrate to 'pdftopng'."
echo ""
echo ""
exit 1

IFFULLPATH="$1"
IFNAME="$(basename "$IFFULLPATH")"
OUTPUT_FORMAT="$2"

if [[ -z "$2" ]]; then
    echo "Usage:        pdftoimg   input.pdf   jpg"
    exit 0
fi

GSDEV="jpeg"
case "${OUTPUT_FORMAT,,}" in
    png)
        GSDEV="png16m"
        ;;
esac
echo "GSDEV = $GSDEV"


gs \
    -dNOPAUSE \
    -dBATCH \
    -sDEVICE="$GSDEV" \
    -r600 \
    -dGraphicsAlphaBits=4 \
    -dTextAlphaBits=4 \
    -sOutputFile="$OUTPUT_PREFIX$IFNAME.%d.$OUTPUT_FORMAT" \
    "$IFFULLPATH"
